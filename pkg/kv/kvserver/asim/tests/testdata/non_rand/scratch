gen_cluster nodes=18
----

set_locality node=1 locality=region=us-east4,zone=us-east4-a
----

set_locality node=2 locality=region=us-east4,zone=us-east4-a
----

set_locality node=3 locality=region=us-east4,zone=us-east4-a
----

set_locality node=4 locality=region=us-central1,zone=us-central1-a
----

set_locality node=5 locality=region=us-central1,zone=us-central1-a
----

set_locality node=6 locality=region=us-central1,zone=us-central1-a
----

set_locality node=7 locality=region=europe-west1,zone=europe-west1-b
----

set_locality node=8 locality=region=europe-west1,zone=europe-west1-b
----

set_locality node=9 locality=region=europe-west1,zone=europe-west1-b
----

set_locality node=10 locality=region=europe-central2,zone=europe-central2-b
----

set_locality node=11 locality=region=europe-central2,zone=europe-central2-b
----

set_locality node=12 locality=region=europe-central2,zone=europe-central2-b
----

set_locality node=13 locality=region=europe-north1,zone=europe-north1-b
----

set_locality node=14 locality=region=europe-north1,zone=europe-north1-b
----

set_locality node=15 locality=region=europe-north1,zone=europe-north1-b
----

set_locality node=16 locality=region=us-west1,zone=us-west1-a
----

set_locality node=17 locality=region=us-west1,zone=us-west1-a
----

set_locality node=18 locality=region=us-west1,zone=us-west1-a
----

gen_ranges ranges=1 repl_factor=7
----

set_span_config 
[0,10000): num_replicas=7 num_voters=5 constraints={'+region=europe-central2':1,'+region=europe-north1':1,'+region=europe-west1':1,'+region=us-central1':1,'+region=us-east4':2,'+region=us-west1':1} voter_constraints={'+region=us-east4':1,'+region=europe-central2':1}
----

set_span_config delay=20m
[0,10000): num_replicas=7 num_voters=5 constraints={'+region=europe-central2':1,'+region=europe-north1':1,'+region=europe-west1':1,'+region=us-central1':1,'+region=us-east4':1,'+region=us-west1':1} voter_constraints={'+region=us-east4':2}
----

assertion type=conformance under=0 over=0 unavailable=0 violating=0
----

eval duration=40m
----
OK

topology
----
europe-central2
  europe-central2-b
  │ └── [10 11 12]
europe-north1
  europe-north1-b
  │ └── [13 14 15]
europe-west1
  europe-west1-b
  │ └── [7 8 9]
us-central1
  us-central1-a
  │ └── [4 5 6]
us-east4
  us-east4-a
  │ └── [1 2 3]
us-west1
  us-west1-a
    └── [16 17 18]

# vim:ft=sh
