gen_cluster nodes=10
----

set_locality node=1 locality=region=a
----

set_locality node=2 locality=region=a
----

set_locality node=3 locality=region=b
----

set_locality node=4 locality=region=b
----

set_locality node=5 locality=region=c
----

set_locality node=6 locality=region=c
----

set_locality node=7 locality=region=d
----

set_locality node=8 locality=region=d
----

set_locality node=9 locality=region=e
----

set_locality node=10 locality=region=e
----

gen_ranges ranges=5 repl_factor=1
----

set_span_config
[0,10000): num_replicas=7 num_voters=5 constraints={'+region=a':2,'+region=b':2,'+region=c':1,'+region=d':1,'+region=e':1} voter_constraints={'+region=a':1,'+region=b':1,'+region=c':1,'+region=d':1,'+region=e':1}
----

set_span_config delay=10m
[0,10000): num_replicas=7 num_voters=5 constraints={'+region=a':1,'+region=b':1,'+region=c':1,'+region=d':1,'+region=e':1} voter_constraints={'+region=a':2,'+region=b':2}
----

assertion type=conformance under=0 over=0 unavailable=0 violating=0
----

eval duration=20m
----
OK

topology
----
a
  └── [1 2]
b
  └── [3 4]
c
  └── [5 6]
d
  └── [7 8]
e
  └── [9 10]

# vim:ft=sh
